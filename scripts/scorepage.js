const questions = [
  {
      options: [
          "A) BELIEVES IN HIM", // Question 1
          "B) IS A CHRISTIAN", 
          "C) KEEPS THE COMMANDMENTS", 
          "D) IS A GOOD PERSON", 
          "E) ACCEPTS HIM AS THEIR LORD AND SAVIOR", 
          "F) DOES NOT CONTRIBUTE TO CLIMATE CHANGE"
      ],
      correctAnswer: "A) BELIEVES IN HIM"
  },
  {
      options: [
          "A) THOSE WHO ACCEPT ME AS THEIR LORD AND SAVIOR.", // Question 2
          "B) THOSE WHO ARE TOLERANT OF DIFFERENT RACES, SEXES, AND RELIGIONS.", 
          "C) THOSE WHO ARE NOT EVIL.", 
          "D) THE ONE WHO DOES THE WILL OF MY FATHER WHO IS IN HEAVEN.", 
          "E) JESUS DID NOT SAY THIS AND EVERYBODY WILL GO TO HEAVEN BECAUSE THERE IS NO SUCH THING AS HELL."
      ],
      correctAnswer: "D) THE ONE WHO DOES THE WILL OF MY FATHER WHO IS IN HEAVEN."
  },
  {
      options: [
          "A) \"THAT IS FALSE,\" JESUS REPLIED. \"HOW IS IT YOU ARE CONSIDERED A SCHOLAR?\"", // Question 3
          "B) \"THAT IS FALSE,\" JESUS REPLIED. \"THIS TEACHING IS OF THE PHARISEES BUT NOT OF GOD.\"",
          "C) \"THAT WAS TRUE WITH THE OLD COVENANT [BASED UPON LAW],\" JESUS REPLIED. \"IN THE NEW COVENANT NOW UPON YOU, GRACE IS THE PATH TO ETERNAL LIFE.\"",
          "D) \"YOU HAVE ANSWERED CORRECTLY,\" JESUS REPLIED. \"DO THIS AND YOU WILL LIVE.\""
      ],
      correctAnswer: "D) \"YOU HAVE ANSWERED CORRECTLY,\" JESUS REPLIED. \"DO THIS AND YOU WILL LIVE.\""
  },
  {
      options: [
          "A) CONFESS WITH THEY LIPS/DOETH NOT", // Question 4
          "B) BELIEVETH AND IS BAPTIZED/BELIEVETH NOT", 
          "C) BE NOT SEXIST/BE MISOGYNISTIC", 
          "D) DOETH GOOD/DOETH EVIL", 
          "E) DOTH CONVERT TO CHRIST/DOTH REMAIN A JEW"
      ],
      correctAnswer: "B) BELIEVETH AND IS BAPTIZED/BELIEVETH NOT"
  },
  {
      options: [
          "A) HAVE ACCEPTED ME AS THEIR LORD / ARE UNSAVED", // Question 5
          "B) ARE BAPTIZED / ARE NOT BAPTIZED", 
          "C) ARE STILL HUMAN / ARE ZOMBIES", 
          "D) ARE ON THE RIGHT / ARE ON THE LEFT", 
          "E) ARE GOOD / ARE BAD",
          "F) HAVE GOOD HEARING / ARE DEAF",
          "G) HAVE DONE GOOD DEEDS / HAVE DONE WICKED DEEDS"
      ],
      correctAnswer: "G) HAVE DONE GOOD DEEDS / HAVE DONE WICKED DEEDS"
  },
  {
      options: [
          "A) TO PREACH THE GOSPEL TO ALL THE HOUSE OF ISRAEL", // Question 6 
          "B) TO SEEK AND SAVE WHAT WAS LOST",
          "C) TO ALL WHO WELCOME HIM",
          "D) TO MAKE REPARATIONS",
          "E) TO COLLECT INTEREST",
          "F) TO TAX THE RICH"
      ],
      correctAnswer: "B) TO SEEK AND SAVE WHAT WAS LOST"
  },
  {
      options: [
          "A) \"IF YOU DO NOT TREAT THE FATHER'S NAME AS HALLOWED, YOU WILL NOT GO TO HEAVEN\"", // Question 7
          "B) \"THE KINGDOM OF GOD WILL COME SHORTLY AFTER MY RETURN, FOR I WILL BE RAISED TO THE HEAVENS AFTER I DIE.\"", 
          "C) \"FOR IS YOU FORGIVE MEN THEIR TREPASSES, YOUR HEAVENLY FATHER ALSO WILL FORGIVE YOU; BUT IF YOU DO NOT FORGIVE MEN THEIR TREPASSES, NEITHER WILL YOUR FATHER FORGIVE YOUR TREPASSES.\"", 
          "D) \"FOR MY FATHER WILL NEVER LEAD YOU INTO TEMPTATION THAT YOU CANNOT HANDLE.\"", 
          "E) \"AMEN\""
      ],
      correctAnswer: "C) \"FOR IS YOU FORGIVE MEN THEIR TREPASSES, YOUR HEAVENLY FATHER ALSO WILL FORGIVE YOU; BUT IF YOU DO NOT FORGIVE MEN THEIR TREPASSES, NEITHER WILL YOUR FATHER FORGIVE YOUR TREPASSES.\""
  },
  {
      options: [
          "A) THOSE WHO ACCEPT ME AS THEIR LORD AND SAVIOR.", // Question 8 
          "B) ONES WHO RUN FAST WHEN THEY SEE THESE SIGNS.", 
          "C) ONES WHO LIVE SUSTAINABILITY.", 
          "D) JEWS", 
          "E) ONE WHO PERSERVES TO THE END.",
          "F) TRUE CHRISTIAN"
      ],
      correctAnswer:  "E) ONE WHO PERSERVES TO THE END."
  },
  {
      options: [
          "A) THEY KNEW JESUS WAS TALKING FIGURATIVELY ABOUT MOSES GIVING MANNA TO THE PEOPLE; THEY INVITED HIM TO STAY ON LONGER IN THEIR TOWN.", // Question 9 
          "B) THEY THOUGHT THAT JESUS WAS TALKING ABOUT MOSES AND THAT JESUS WAS COMPARING HIMSELF TO ELIJAH IN THE DESERT.", 
          "C) THEY REJECTED WHAT JESUS SAID, RETURNED TO THEIR FORMER WAY OF LIFE, AND NO LONGER ACCOMPANIED HIM.", 
          "D) THEY DID NOT KNOW WHAT JESUS WAS TALKING ABOUT, BUT THEY INVITED HIM TO DINNER." 

      ],
      correctAnswer: "C) THEY REJECTED WHAT JESUS SAID, RETURNED TO THEIR FORMER WAY OF LIFE, AND NO LONGER ACCOMPANIED HIM."
  },
  {
      options: [
          "A) 1=FORGIVE, 2=FORGIVEN", // Question 10 
          "B) 1=SIN, 2=UNHAPPY", 
          "C) 1=CURSE. 2=CURSED", 
          "D) 1=PRAISE, 2=PRAISED", 
          "E) 1=BELIEVE, 2=SAVED",
          "F) 1=COMPLAIN, 2=DISLIKED"
      ],
      correctAnswer: "A) 1=FORGIVE, 2=FORGIVEN"
  },
  {
      options: [
          "A) \"THE RIGHT PARTS OF YOUR BODY ARE ALWAYS MORE EVIL THAN THE LEFT PARTS.\"", // Question 11
          "B) \"THAT WAY YOU WILL ONLY SIN HALF AS MUCH.\"", 
          "C) \"THIS IS NOT NECESSARY FOR PEOPLE WHO ARE SAVED.\"", 
          "D) \"THESE EXAGGERATIONS INDICATE WHAT ALL MEN DESERVE WITHOUT GRACE.\"", 
          "E) \"IT IS BETTER FOR YOU TO LOSE ONE PART OF YOUR BODY THAN FOR YOUR WHOLE BODY TO GO INTO HELL.\"",
      ],
      correctAnswer: "E) \"IT IS BETTER FOR YOU TO LOSE ONE PART OF YOUR BODY THAN FOR YOUR WHOLE BODY TO GO INTO HELL.\"",
  },
  {
      options: [
          "A) BELIEVETH IN ME, EMBRACE MY TEACHINGS.", // Question 12
          "B) ABANDONETH FOSSIL FUELS.", 
          "C) ACCEPT ME AS LORD AND SAVIOR.", 
          "D) TRY TO KEEP UP.", 
          "E) DENY HIMSELF, AND TAKE UP HIS CROSS.",
      ],
      correctAnswer: "E) DENY HIMSELF, AND TAKE UP HIS CROSS.",
  },
  {
      options: [
          "A) AS I HAVE COMMANDED YOU.", // Question 13
          "B) AS I LOVE YOU.", 
          "C) AS YOU LOVE GOD.", 
          "D) UNSELFISHLY", 
          "E) ON SUNDAYS.",
          "F) MORE THAN YOUR IN-LAWS."
      ],
      correctAnswer: "B) AS I LOVE YOU.",
  },
  {
      options: [
          "A) WILL ACKNOWLEDGE ME IN THE END.", // Question 14
          "B) IS NOT REALLY SAVED.", 
          "C) WILL ONLY RECEIVE HALF THE CROWNS AS THE OTHERS.", 
          "D) I WILL DENY BEFORE MY HEAVENLY FATHER.", 
          "E) BETTER HOPE I DON'T FIND OUT ABOUT IT.",
      ],
      correctAnswer: "D) I WILL DENY BEFORE MY HEAVENLY FATHER.",
  },
  {
      options: [
          "A) SINCE NOBODY IS GOOD, YOU CANNOT EARN HEAVEN BYU GOOD WORKS; SIMPLY BELIEVE IN ME AND ACCEPT ME AS LORD.", // Question 15
          "B) IF YOU WISH TO ENTER INTO LIFE, KEEP THE COMMANDMENTS.", 
          "C) MAKE A GOOD CONFESSION BEFORE YOU DIE.", 
          "D) JOHN 3:16.", 
          "E) THERE IS NO SUCH THING AS HELL, SO DO NOT WORRY ABOUT IT.",
      ],
      correctAnswer: "B) IF YOU WISH TO ENTER INTO LIFE, KEEP THE COMMANDMENTS.",
  },
  {
      options: [
          "A) \"ENTER BY THE NARROW GATE; FOR THE GATE IS WIDE AND THE WAY IS EASY THAT LEADS TO DESTRUCTION, AND THOSE WHO ENTER BY IT ARE MANY. FOR THE GATE IS NARROW AND THE WAY IS HARD THAT LEADS TO LIFE, AND THOSE WHO FIND IT ARE FEW.\"", // Question 16
          "B) \"ENTER BY THE WIDE GATE; FOR THE ROPAD TO HEAVEN IS WELL-TRAVELED, AND MOST FOLLOW THIS PATH. FOR THE GATE TO HELL IS NARROW, AND THE FEW WHO ENTER BY IT ARE BEHOLDEN TO EVIL.\"", 
          "C) \"ALL ROADS LEAD TO LIFE BECAUSE THERE IS NO SUCH THING AS HELL, AS THE FALSE RELIGIONS TEACH.\"", 
          "D) \"ALL ROADS LEAD TO LIFE FOR THOSE WHO CONFESS ME WITH THEIR LIPS AND BELIEVE THAT I AM GOD.\"", 
          "E) \"LIFE IS A JOURNEY, NOT A DESTINATION.\"",
      ],
      correctAnswer: "A) \"ENTER BY THE NARROW GATE; FOR THE GATE IS WIDE AND THE WAY IS EASY THAT LEADS TO DESTRUCTION, AND THOSE WHO ENTER BY IT ARE MANY. FOR THE GATE IS NARROW AND THE WAY IS HARD THAT LEADS TO LIFE, AND THOSE WHO FIND IT ARE FEW.\"",
  },
  {
      options: [
          "A) THE SHEEP ARE THE ONES WHO GAVE FOOD, DRINK, CLOTHES, WELCOME, AND CARE TO \"THE LEAST OF [JESUS'] BROTHERS AND SISTERS,\"THE GOATS ARE THE ONES WHO DID NOT.", // Question 17
          "B) THE GOATS ARE THE ONES WHO WERE \"SAVED,\" THE SHEEP ARE THE ONES WHO WERE NOT SAVED.", 
          "C) THE GOATS ARE THE ONES WHO \"DIDN'T WANDER FROM [JESUS'] FLOCK,\"THE SHEEP ARE THE ONES THAT STRAYED.", 
          "D) THE SHEEP ARE THE ONES WHO CONFESSED JESUS AND LIVED \"IN THE KINGDOM\" OF GOD, THE GOATS ARE THE ONES WHO DIDN'T FOLLOW JESUS AND LIVED OUTSIDE THE GATES.", 
          "E) THE SHEEOP ARE THE ONES WITH SOFT WOOL, THE GOATS ARE THE ONES WITH SCRATCHY HAIR.",
          "F) JESUS DIDN'T SAY HIS BECAUSE THERE IS NO SUCH THING AS HELL."
      ],
      correctAnswer: "A) THE SHEEP ARE THE ONES WHO GAVE FOOD, DRINK, CLOTHES, WELCOME, AND CARE TO \"THE LEAST OF [JESUS'] BROTHERS AND SISTERS,\"THE GOATS ARE THE ONES WHO DID NOT.",
  },
  {
      options: [
          "A) HE SHALL SURELY BECOME A BELIEVER/THEY ARE STILL SAVED", // Question 18
          "B) HE WILL REJOIN THE HOUSE OF ISRAEL/THEY WILL BE CAST OUT AND RECEIVE \"AN EYE FOR AN EYE, A TOOTH FOR A TOOTH.\"", 
          "C) HE SHALL SURELY LIVE/THEY SHALL DIE.", 
          "D) HE IS NOW JUST/THEY ARE NOW WICKED.", 
          "E) HIS FRIENDS WILL SAY HE IS NO FUN/HE WILL FIT IN WITH THE WRONG CROWD.",
      ],
      correctAnswer: "C) HE SHALL SURELY LIVE/THEY SHALL DIE.",
  },
  {
      options: [
          "A) LISTEN YE: / AND DID RECEIVE INSTRUCTION", // Question 19
          "B) LISTEN YE: / AND DID DRINK", 
          "C) REPENT YE: / CONFESSING THEIR SINS", 
          "D) REPENT YE: / RECEIVING FORGIVENESS", 
          "E) RUN: / AND DID CROSS THE OTHER SIDE",
          "F) GATHER YE AROUND: / AND DID BATHE"
      ],
      correctAnswer: "C) REPENT YE: / CONFESSING THEIR SINS",
  },
  {
      options: [
          "A) WIPE AWAY EVERY TEAR FROM THEIR EYES", // Question 20
          "B) OVERTHROW THEIR ENEMIES", 
          "C) ANSWER THEIR PRAYERS", 
          "D) TAKE CARE OF ALL THEIR NEEDS", 
          "E) GIVE THEM DRINK, AND FEED THEM IN HIS HOUSE",
          "F) BE THEIR FATHER IF THEY ARE SAVED"
      ],
      correctAnswer: "A) WIPE AWAY EVERY TEAR FROM THEIR EYES",
  },
  {
      options: [
          "A) HOT TEMPERATURES, THE COLOR RED, THE COLOR BLACK", // Question 21
          "B) CATHOLICS, JEWS, MUSLIMS",
          "C) JUDGEMENTAL PEOPLE, MUSLIMS, PROTESTANTS",
          "D) DEATH, MOURNING, PAIN",
          "E) MOSQUITOS, SNAKES, SCORPIONS",
          "F) DANCING, PARTIES, SINGING"
      ],
      correctAnswer: "D) DEATH, MOURNING, PAIN"
  },
  {
      options: [
          "A) 1=CHRISTIANITY, 2=JUDAISM", // Question 22
          "B) 1=JUDAISM, 2=CHRISTIANITY",
          "C) 1=BELIEF, 2=GRACE",
          "D) 1=THE LAW, 2=GRACE",
          "E) 1=FAITH, 2=WORKS",
          "F) 1=A JUDGE, 2=A JURY"
      ],
      correctAnswer: "E) 1=FAITH, 2=WORKS"
  },
  
  {
      options: [
          "A) BELIEF", // Question 23
          "B) DIVINE KNOWLEDGE",
          "C) EXPERIENCE",
          "D) FAITH",
          "E) GRACE",
          "F) KARMA",
          "G) REVELATION",
          "H) SCIENCE",
          "I) WISDOM"
      ],
      correctAnswer: "D) FAITH"
  },
  {
      options: [
          "A) THE KNOWLEDGE OF GOD", // Question 24
          "B) THE RICHES OF HEAVEN",
          "C) THE KNOWLEDGE OF HEAVEN",
          "D) THE THINGS WHICH GOD HATH PREPARED FOR THEM THAT LOVE HIM",
          "E) THE CONSEQUENCES OF GLOBAL WARMING",
      ],
      correctAnswer: "D) THE THINGS WHICH GOD HATH PREPARED FOR THEM THAT LOVE HIM",
  },
  {
      options: [
          "A) \"FOR THERE ARE MANY MEDIATORS BETWEEN GOD AND MAN, JESUS, THE APOSTLES, THE POPES, THE PRIESTS, AND A BELIEVER'S PARENTS - ALL WHO TEACH THE BELIEVER TO FOLLOW CHRIST.\"", // Question 25
          "B) \"FOR THERE ARE ONLY TWO MEDIATORS BETWEEN GOD AND MANKIND, JESUS AND WHOEVER BRINGS A NON-BELIEVER TO FAITH IN JESUS.\"",
          "C) \"FOR THERE ARE ONLY TWO MEDIATORS BETWEEN GOD AND A PERSON, JESUS AND A MAN'S PARENTS, BOTH OF WHOM GIVE LIFE TO A MAN.\"",
          "D) \"FOR THERE IS ONE GOD AND ONE MEDIATOR BETWEEN GOD AND MANKIND, THE MAN CHRIST JESUS, WHO GAVE HIMSELF AS A RANSOM FOR ALL PEOPLE.\"",
          "E) \"FOR THERE ARE MANY MEDIATORS, SCHOLARS OF THE LAW, WHO ONLY GET PAID IF YOU GET TO HEAVEN.\"",
      ],
      correctAnswer:  "D) \"FOR THERE IS ONE GOD AND ONE MEDIATOR BETWEEN GOD AND MANKIND, THE MAN CHRIST JESUS, WHO GAVE HIMSELF AS A RANSOM FOR ALL PEOPLE.\""
  },
  {
      options: [
          "A) 1=KINDNESS, 2=SEVERITY", // Question 26
          "B) 1=GRACE, 2=FORGIVENESS",
          "C) 1=GRACE, 2=FAITHFULNESS",
          "D) 1=WATER, 2=FERTILIZER",
          "E) 1=FIRE, 2=WATER",
      ],
      correctAnswer: "A) 1=KINDNESS, 2=SEVERITY"
  },
  {
      options: [
          "A) THE SELF-RIGHTEOUS OR HYPOCRITICAL OR PHARISEE", // Question 27
          "B) FORNICATORS NOR IDOLATER NOR ADULTERS NOR BOY PROSTITUTES NOR SODOMITES NOR THIEVES NOR THE GREEDY NOR DRUNKARDS NOR SLANDERERS NOR ROBBERS.",
          "C) UNBELIEVERS OR THE UN-SAVED",
          "D) JEWS NOR MUSLIMS NOR PAGANS NOR BELIEVERS",
          "E) RACISTS NOR HOMOPHOBES",
      ],
      correctAnswer: "B) FORNICATORS NOR IDOLATER NOR ADULTERS NOR BOY PROSTITUTES NOR SODOMITES NOR THIEVES NOR THE GREEDY NOR DRUNKARDS NOR SLANDERERS NOR ROBBERS."
  },
  {
      options: [
          "A) TRUE", // Question 28
          "B) FALSE"
      ],
      correctAnswer: "A) TRUE"
  },
  {
      options: [
          "A) IS THE PLANT THAT YIELDS THE HIGHEST CROP", // Question 29
          "B) IS THE HARDEST PLANT TO GROW BUT PRODUCES THE MOST VALUABLE OF SPICES",
          "C) IS THE SMALLEST OF ALL THE SEEDS, YET WHEN FULL-GROWN IT IS THE LARGEST OF PLANTS",
          "D) ALWAY GROWS PEACEFULLY WITH OTHER TYPES OF PLANTS, REGARDLESS OF WHAT TYPES OF PLANTS ARE AROUND IT",
          "E) CROWDS OUT AND REPLACES OTHER PLANTS",
          "F) IS GOOD WITH TWO PICKLES ON CHICKEN AND BREAD"
      ],
      correctAnswer: "C) IS THE SMALLEST OF ALL THE SEEDS, YET WHEN FULL-GROWN IT IS THE LARGEST OF PLANTS"
  },
  {
      options: [
          "A) NON-BELIEVERS FROM THE BELIEVERS", // Question 30
          "B) JEWS FROM THE CHRISTIANS",
          "C) UNSAVED FROM THE SAVED",
          "D) WICKED FROM THE RIGHTEOUS",
          "E) MURDERERS FROM THE PEACEFUL",
          "F) CLIMATE DENIERS FROM THE NORMAL PEOPLE",
          "G) JESUS DID NOT SAY THIS, BUT CORRECTED ONE OF HIS FOLLOWERS WHO DID."
      ],
      correctAnswer: "D) WICKED FROM THE RIGHTEOUS"
  },
  {
      options: [
          "A) ONLY THE PHARISEE BECAUSE HE FASTED AND DID NOT ROB, DO EVIL, OR COMMIT ADULTERY - WHERE AS THE TAX COLLECTOR EVEN ADMITTED THAT HE WAS A SINNER.", // Question 31
          "B) ONLY THE TAX COLLECTOR BECAUSE HE HUMBLED HIMSELF WHEREAS THE PHARISEE EXALTED HIMSELF.",
          "C) BOTH THE PHARISEE AND THE TAX COLLECTOR BECAUSE BOTH PRAYED TO GOD IN THEIR OWN WAY.",
          "D) NEITHER THE PHARISEE NOR THE TAX COLLECTOR BECAUSE EACH OF THEM WAS FLAWED IN DIFFERENT WAYS.",
          "E) THE SCRIPTURE DOES NOT SAY BECAUSE JESUS WANTED THE AUDIENCE TO PONDER HIS LARGER MESSAGE WITHOUT TELLING THEM THE ANSWER.",
      ],
      correctAnswer: "B) ONLY THE TAX COLLECTOR BECAUSE HE HUMBLED HIMSELF WHEREAS THE PHARISEE EXALTED HIMSELF."
  },
  {
      options: [
          "A) 1=CHURCH, 2=PHARISEES", // Question 32
          "B) 1=BELIEVERS, 2=NON-BELIEVERS",
          "C) 1=WORLD, 2=EVILDOERS",
          "D) 1=JEWS, 2=PAGANS",
          "E) 1=CHRISTIANS, 2=DEMONS",
          "F) 1=WHEAT, 2=CHAFF"
      ],
      correctAnswer: "C) 1=WORLD, 2=EVILDOERS"
  },
  {
      options: [
          "A) THAT SHEEP WILL BE DINNER", // Question 33
          "B) THAT SHEEP WILL BE BRANDED WITH A '666'",
          "C) THAT SHEEP WILL BE TAKEN BACK TO THE FLOCK AND CONSIDERED A BLACK SHEEP FROM THAT DAY ON",
          "D) HE WILL REMOVE IT FROM THE FLOCK",
          "E) HE REJOICES MORE OVER IT THAN OVER THE NINETY-NINE THAT DID NOT STRAY",
      ],
      correctAnswer: "E) HE REJOICES MORE OVER IT THAN OVER THE NINETY-NINE THAT DID NOT STRAY"
  }
  // Add more questions as needed
];

// Get userAnswers from query parameters
// ----- Retrieve the User's Answers from Query Parameters -----
const urlParams = new URLSearchParams(window.location.search);
const userAnswersParam = urlParams.get("userAnswers");

if (!userAnswersParam) {
  console.error("Missing userAnswers in URL parameters.");
  alert("Unable to calculate your score. Please complete the test.");
  window.location.href = "mobile.html";
}

const userAnswers = JSON.parse(userAnswersParam); // Parsed from URL parameter
let scoreSubmitted = false;
console.log("Questions:", questions);
console.log("User Answers:", userAnswers);


// ----- Calculate the Score -----
function calculateScore() {
    let score = 1;  // Start at 0 points
    questions.forEach((question, index) => {
      // (You might also want to trim and uppercase if needed for consistency)
      if ((userAnswers[index] || "").trim().toUpperCase() === (question.correctAnswer || "").trim().toUpperCase()) {
        score++;
      }
    });
    console.log("Total number of questions:", questions.length);
    return score;
  }
  

// ----- Send the Computed Score to the Server -----
function updateServerScore(score) {
    if (scoreSubmitted || localStorage.getItem("scoreSubmitted") === "true") {
      console.log("Score already submitted.");
      return;
    }
  
    scoreSubmitted = true;
    localStorage.setItem("scoreSubmitted", "true");
  
    console.log("Submitting score to server:", score);
  
    fetch("http://127.0.0.1:5000/set_score", {
      method: "POST",
      credentials: "include",  // Ensure your session cookie is sent
      headers: {
        "Content-Type": "application/x-www-form-urlencoded"
      },
      body: "score=" + score,
    })
    .then((response) => response.text())
    .then((data) => {
      console.log("Server response: " + data);
    })
    .catch((error) => console.error("Error updating score: ", error));
  }
  

// ----- Render the Score Page -----
function renderScorePage() {
  const body = document.body;
  body.style.background = "url('/assets/closingpage.png') center center / cover no-repeat";

  const score = calculateScore();
  updateServerScore(score);

  const container = document.createElement("div");
  container.className = "white-box";
  body.appendChild(container);

  const scoreHeader = document.createElement("h1");
  scoreHeader.textContent = "Your Score is:";
  scoreHeader.className = "score-header";
  container.appendChild(scoreHeader);

  const scoreBox = document.createElement("div");
  scoreBox.className = "score-box";

  const scoreText = document.createElement("span");
  scoreText.textContent = `${score} / ${questions.length}`;
  scoreText.className = "score-text";
  scoreBox.appendChild(scoreText);
  container.appendChild(scoreBox);

  const bibleGraphic = document.createElement("img");
  bibleGraphic.src = "/assets/biblegraphic.webp";
  bibleGraphic.alt = "Bible Graphic";
  container.appendChild(bibleGraphic);

  const firstText = document.createElement("img");
  firstText.src = "/assets/firsttext.webp";
  firstText.alt = "First Text";
  container.appendChild(firstText);

  const buttonGrid = document.createElement("div");
  buttonGrid.className = "button-grid";

  const buttons = [
    { src: "/assets/answers.webp", alt: "Answers", url: "answers.html" },
    { src: "/assets/buttonlearn.webp", alt: "Learn", url: "video.html" },
    { src: "/assets/invite.webp", alt: "Invite", url: "invite.html" },
    { src: "/assets/feedback.webp", alt: "Feedback", url: "feedback.html" },
    { src: "/assets/sources.webp", alt: "Sources", url: "sources.html" },
    { src: "/assets/aboutus.webp", alt: "About Us", url: "aboutus.html" }
  ];

  buttons.forEach((button) => {
    const link = document.createElement("a");
    link.href = button.url;
    link.target = "_blank";
    const buttonImage = document.createElement("img");
    buttonImage.src = button.src;
    buttonImage.alt = button.alt;
    buttonImage.className = "button-image";
    link.appendChild(buttonImage);
    buttonGrid.appendChild(link);
  });

  container.appendChild(buttonGrid);

  const secondText = document.createElement("img");
  secondText.src = "/assets/secondtext.webp";
  secondText.alt = "Second Text";
  container.appendChild(secondText);

  const homeButton = document.createElement("img");
  homeButton.src = "/assets/homebutton.webp";
  homeButton.alt = "Home Button";
  homeButton.className = "home-button";
  homeButton.onclick = () => {
    window.location.href = "index.html";
  };
  container.appendChild(homeButton);
}

// ----- Render the Score Page on Window Load -----
window.onload = renderScorePage;
